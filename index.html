<html>
  <head>
    <meta charset="utf-8">
    <title>作成</title>
    <script src="main.js"></script>
    <script src="glboost.js"></script>
    <script src="FBX_Parser.js"></script>
  </head>
  <body>
    <script>
      function ajax(url) {
        return new Promise(function (resolve, reject) {
          var xhr = new XMLHttpRequest;
          xhr.open('GET', url);
          xhr.onload = function () {
            if (xhr.status == 200) {
              resolve(xhr.response); // 成功時
            } else {
              reject(new Error(xhr.statusText));  // 404エラーなど
            } 
          }
          xhr.onerror = reject; // urlに問題がある場合など
          xhr.send();
        })
      }

      function onFulfilled(response) {
        var fbx = new FBX_Parser(response);
        fbx.parseFBX();
        var main = new Main();
        main.draw(fbx.getVertx(), fbx.getIndexTriangle(), fbx.getIndexQuad());
      
      }
      function onRejected(error)     { elem.textContent = error    }
      
      ajax('./head.fbx').then(onFulfilled, onRejected);
    </script>
    <canvas id="world" width="600" height="600"></canvas><br>
  </body>
</html>